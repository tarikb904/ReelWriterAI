@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens and utilities for a vibrant, polished UI */
@layer base {
  :root {
    /* Base HSL components */
    --bg-h: 222;
    --bg-s: 20%;
    --bg-l: 98%;

    --foreground-h: 220;
    --foreground-s: 12%;
    --foreground-l: 8%;

    --primary-h: 268;
    --primary-s: 88%;
    --primary-l: 60%;

    --accent-h: 190;
    --accent-s: 85%;
    --accent-l: 48%;

    --muted-h: 215;
    --muted-s: 25%;
    --muted-l: 95%;

    --card-l: 100%;
    --card-foreground-l: 8%;

    /* Gradient stops as CSS variables for easy re-use */
    --grad-1: 262 92% 60%;
    --grad-2: 220 90% 60%;
    --grad-3: 195 85% 48%;

    --glass-light: rgba(255,255,255,0.6);
    --glass-dark: rgba(255,255,255,0.06);

    --radius-lg: 1rem;
    --radius-md: 0.75rem;
    --radius-sm: 0.5rem;

    /* Border color base (used below) */
    --border-color: 220 16% 92%;

    /* Map to shadcn tokens (light) */
    --background: var(--bg-h) var(--bg-s) var(--bg-l);
    --foreground: var(--foreground-h) var(--foreground-s) var(--foreground-l);

    --primary: var(--primary-h) var(--primary-s) var(--primary-l);
    --primary-foreground: 0 0% 100%;

    --accent: var(--accent-h) var(--accent-s) var(--accent-l);
    --accent-foreground: 0 0% 100%;

    --muted: var(--muted-h) var(--muted-s) var(--muted-l);
    --muted-foreground: 220 9% 36%;

    --secondary: var(--muted);
    --secondary-foreground: var(--foreground);

    --border: var(--border-color);
    --input: var(--border-color);
    --ring: var(--accent);

    --card: var(--bg-h) var(--bg-s) var(--card-l);
    --card-foreground: var(--foreground-h) var(--foreground-s) var(--card-foreground-l);

    --popover: var(--background);
    --popover-foreground: var(--foreground);
  }

  body {
    /* Use theme tokens for actual painting */
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    @apply antialiased;
    font-synthesis: none;
  }

  /* Dark theme overrides */
  .dark {
    --bg-h: 226;
    --bg-s: 34%;
    --bg-l: 6%;

    --foreground-h: 220;
    --foreground-s: 12%;
    --foreground-l: 96%;

    --glass-light: rgba(255,255,255,0.06);
    --glass-dark: rgba(0,0,0,0.45);

    --border-color: 220 14% 14%;

    /* Map overrides to shadcn tokens (dark) */
    --background: var(--bg-h) var(--bg-s) var(--bg-l);
    --foreground: var(--foreground-h) var(--foreground-s) var(--foreground-l);

    --muted: 220 10% 16%;
    --muted-foreground: 215 15% 72%;

    --secondary: var(--muted);
    --secondary-foreground: var(--foreground);

    --card: var(--bg-h) var(--bg-s) 8%;
    --card-foreground: var(--foreground-h) var(--foreground-s) var(--foreground-l);
  }

  /* Ensure borders use the design border color when 'border' utility applied */
  * {
    border-color: hsl(var(--border));
  }
}

/* Component utilities and polished surfaces */
@layer components {
  .glass-card {
    /* translucent frosted glass */
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.55));
    border: 1px solid hsl(var(--border));
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: var(--radius-lg);
    padding: 1rem;
  }

  /* dark mode glass */
  .dark .glass-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border: 1px solid hsl(var(--border));
  }

  .primary-gradient {
    background: linear-gradient(135deg,
      hsl(var(--grad-1)),
      hsl(var(--grad-2) / 0.95),
      hsl(var(--grad-3)));
    color: white;
  }

  .logo-gradient {
    background: linear-gradient(135deg, rgba(139,92,246,1) 0%, rgba(79,70,229,1) 50%, rgba(34,211,238,1) 100%);
  }

  .elevated {
    box-shadow:
      0 6px 18px rgba(16,24,40,0.08),
      0 2px 6px rgba(16,24,40,0.06);
    transition: transform 180ms ease, box-shadow 180ms ease;
  }
  .elevated:hover {
    transform: translateY(-4px);
    box-shadow:
      0 18px 40px rgba(16,24,40,0.12),
      0 6px 12px rgba(16,24,40,0.08);
  }

  /* subtle badge styling used for source badges */
  .source-badge {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-muted/60 text-muted-foreground;
  }
}

/* Utilities for subtle shimmer skeleton */
@layer utilities {
  .skeleton {
    background: linear-gradient(90deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.06) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.6s linear infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}